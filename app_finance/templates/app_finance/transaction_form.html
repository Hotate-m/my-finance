{% extends "app_finance/base.html" %}

{% block title %}
  {% if goal %}
    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ - {{ goal.name }}
  {% else %}
    ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà
  {% endif %}
{% endblock %}

{% block content %}
<div class="page-wrap" style="max-width:650px;margin:0 auto;padding:8px 0 32px;">
  <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ + ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h1 class="h4 mb-1">
        {% if goal %}
          ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
        {% else %}
          ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà
        {% endif %}
      </h1>
      <div class="text-secondary" style="font-size:12px;">
        ‡πÉ‡∏ä‡πâ‡∏à‡∏î‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‚Äì‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ö‡∏≤‡∏ó
      </div>
    </div>
    <a href="javascript:history.back()" class="btn btn-ghost btn-sm d-none d-md-inline-flex">
      ‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
    </a>
  </div>

  <!-- ‡∏ñ‡πâ‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å Goal ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ñ‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  {% if goal %}
    <div class="card-soft-ghost p-2 mb-3" style="font-size:13px;">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <div class="text-secondary" style="font-size:11px;">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>
          <div class="fw-semibold">{{ goal.name }}</div>
          {% if goal.target_amount %}
            <div class="text-secondary" style="font-size:11px;">
              ‡πÄ‡∏õ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏ø{{ goal.target_amount|floatformat:0 }}
            </div>
          {% endif %}
        </div>
        <span class="badge-chip">
          ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ô‡∏µ‡πâ
        </span>
      </div>
    </div>
  {% endif %}

  <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏•‡∏±‡∏Å -->
  <div class="card-soft p-3 p-md-4">
    <form method="post" enctype="multipart/form-data" novalidate>
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger py-2" style="font-size:13px;">
          {% for err in form.non_field_errors %}
            <div>{{ err }}</div>
          {% endfor %}
        </div>
      {% endif %}

      {# ‡∏ß‡∏ô field ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏ï‡πà‡∏à‡∏±‡∏î layout ‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ #}
      {% for field in form %}
        <div class="mb-3">
          <label class="form-label mb-1" style="font-size:13px;">
            {{ field.label }}
            {% if field.field.required %}
              <span class="text-danger">*</span>
            {% endif %}
          </label>

          {{ field }}

          {% if field.help_text %}
            <div class="form-text" style="font-size:11px;color:#9ca3af;">
              {{ field.help_text|safe }}
            </div>
          {% endif %}

          {% for error in field.errors %}
            <div class="text-danger" style="font-size:12px;">
              {{ error }}
            </div>
          {% endfor %}
        </div>
      {% endfor %}

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î: ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡∏Å‡∏î‡∏á‡πà‡∏≤‡∏¢‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ -->
      <div class="d-flex flex-column flex-md-row gap-2 mt-3">
        <button type="submit" class="btn btn-brand w-100">
          üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ
        </button>
        <a href="{% url 'app_finance:transactions_list' %}" class="btn btn-ghost w-100">
          ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </a>
      </div>
    </form>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡∏™‡∏∏‡∏î) -->
  <div class="mt-3 d-md-none text-center">
    <a href="javascript:history.back()" style="font-size:13px;" class="text-secondary">
      ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    </a>
  </div>
</div>
{% endblock %}
  